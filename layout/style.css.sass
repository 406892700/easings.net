@import 'compass/css3'
@import 'compass/layout/sticky-footer'

// Mixin and Helpers

@function black($opacity)
  @return rgba(0, 0, 0, $opacity)

@function white($opacity)
  @return rgba(255, 255, 255, $opacity)

@mixin image-size($path)
  width: image-width($path)
  height: image-height($path)

@mixin image($path)
  +image-size($path)
  background: inline-image($path) no-repeat

// Base styles

*
  margin: 0
  padding: 0

body
  background: white
  color: black
  font-size: 16px
  font-family: sans-serif

code
  font-family: "PT Mono", monospace
  font-size: 14px

a
  outline: none

// Easings

$easing-width: 120px + 4px

.root, footer
  width: 6 * ($easing-width + 20px) + 35px
  max-width: 100%
  margin: 0 auto
  position: relative

.root
  padding: 0 10px
  overflow: hidden

.about
  padding: 20px ($easing-width + 40px) 5px 0
  line-height: 1.3
  p
    margin-bottom: 5px

.easings
  margin: 0 -30px 0 -10px
  position: relative

.easing
  list-style: none
  display: inline-block
  margin: 3px 4px
  padding: 5px
  position: relative
  &.linear
    position: absolute
    top: 0
    right: 25px
  &.in-out
    margin-right: 25px
  &.easeOutElastic h2
    +box-shadow(white 0 26px 8px -8px inset)
  h2
    text-align: center
    font-size: 15px
    font-weight: normal
    margin-bottom: -25px
    position: relative
    z-index: 2
  .graph
    text-decoration: none
    position: relative

.easing
  svg
    width: $easing-width
    height: 60px + 80px
    margin-bottom: -30px
    line
      stroke: #bbb
      stroke-width: 1px
    path
      fill: transparent
      fill: white(0)
      stroke: black
      stroke-width: 2px
    text
      font-size: 12px
      fill: #bbb

.easing
  .example
    position: absolute
    top: 0
    left: $easing-width - 2px
    width: 21px
    height: 12px
    overflow: hidden
    .rect
      position: absolute
      top: 0
      right: 0
      bottom: 0
      left: 8px
      background: red
    .arrow
      position: absolute
      background: red
      left: 4px
      top: 1px
      width: 10px
      height: 10px
      +rotate(45deg)
  .dot
    position: absolute
    top: 5px
    left: 1px
    background: #ddd
    width: 2px
    height: 2px
    +border-radius(2px)
  .example, .dot
    opacity: 0
    +transition(opacity 200ms)
  &.hover
    .example, .dot
      opacity: 1

.howtos
  margin-top: -10px
  h2
    font-weight: normal
    font-size: 25px
    padding: 17px 0 5px 0
  h3
    font-size: 25px

// Easing description

.easing-description
  .back
    float: right
    margin-top: 19px
    color:  red
    text-decoration: none
    .text
      display: inline-block
      margin-left: 5px
      border-bottom: 1px dotted
    &:hover .text
      border-bottom-style: solid
  h2
    font-weight: normal
    font-size: 25px
    margin-top: 15px
  h3
    font-size: 22px

// Description formation

.howtos, .easing-description
  p
    padding-bottom: 5px
  pre
    padding-top: 5px
    font-size: 13px
    strong
      color: red
      font-size: 14px
      font-weight: normal
  a
    color: black
  h3
    font-weight: normal
    padding: 17px 0 5px 0

// Slider

.easing-description
  position: absolute
  top: 0
  left: 105%
  width: 100%
  display: none
.page-slider
  position: relative
.page-animation
  .page-slider
    +transition(left 600ms cubic-bezier(0.770, 0.000, 0.175, 1.000))
  .easing.linear
    +transition(top 600ms cubic-bezier(0.770, 0.000, 0.175, 1.000))
.easing-page
  .page-slider
    left: -105%
  .easing.linear
    top: -105px

// Open source badge

.open-source
  display: block
  position: absolute
  width: 80px
  height: 80px
  top: 0
  right: 0
  text-decoration: none
  &:active
    .background
      background: #ddd
  .crop
    position: absolute
    top: 0
    left: -10px
    width: 90px
    height: 90px
    overflow: hidden
  .background, .corner
    position: absolute
    top: -65px
    left: 32px
    width: 120px
    height: 120px
    +rotate(45deg)
  .background
    background: #e8e8e8
    +box-shadow(black(0.5) 0 -7px 7px -7px inset)
  .source
    position: absolute
    color: black
    text-shadow: white 0 1px 0
    left: 40px
    line-height: 1.1
    code
      font-size: 10px
  .source-crop
    position: absolute
    width: 120px
    height: 120px
    background: white
    top: 22px
    left: -50px
    +rotate(45deg)
  .octocat
    position: absolute
    +image("octocat.png")
    +rotate(45deg)
    top: 24px
    left: 43px
    +box-shadow(black(0.4) 0 -5px 5px -5px inset)
  .corner
    position: absolute
    overflow: hidden
    left: 21px
    top: -66px
  .title
    position: absolute
    top: 82px
    left: 23px
    width: 82px
    height: 80px
    +rotate(45deg)
    background: white
    +box-shadow(black(0.5) 0 0 3px)
  .border, .text
    position: absolute
    bottom: 0
    width: 100%
  .border
    border-top: 1px dashed #999
  .text
    bottom: 4px
    text-align: center
    font-size: 12px
    color: #666
    padding-left: 5px
  .rotator
    position: absolute
    width: 80px
    height: 80px
    left: 10px
    z-index: 3
  .translate
    position: absolute
    top: 90px
    text-align: center
    color: #666
    font-size: 13px
    opacity: 0
    +transition(opacity 400ms)
    &.show
      opacity: 1

.transform3d
  .open-source
    .text, .border
      +backface-visibility(hidden)
    .rotator
      +transition(all 600ms cubic-bezier(0.455, 0.030, 0.515, 0.955))
    .shadow
      position: absolute
      top: 0
      left: 0
      right: 0
      bottom: 0
      background: black(0.1)
      opacity: 0
    &:hover
      .rotator
        +rotate3d(1, 1, 0, 180deg)

.transform2d
  .open-source
    &:hover
      .text, .border
        display: none
      .rotator
        +rotate(180deg)
      .translate
        opacity: 1

// Footer

+sticky-footer(34px, ".root", ".root-footer", "footer")

footer
  height: 32px
  line-height: 32px
  text-align: right
  li
    font-family: "Trebuchet MS", sans-serif
    list-style: none
    display: inline-block
    font-size: 12px
    padding-right: 5px
    a
      color: #888
      &:hover
        text-decoration: none
    .current
      color: black
